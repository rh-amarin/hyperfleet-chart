HyperFleet for Google Cloud Platform has been deployed!

Components:
  - HyperFleet API: Cluster lifecycle management
  - Sentinel (clusters): Resource polling and event publishing
{{- if index .Values "base" "sentinel-nodepools" "enabled" }}
  - Sentinel (nodepools): Nodepool resource polling and event publishing
{{- end }}
  - Landing Zone Adapter: Namespace creation
  - Validation GCP Adapter (clusters): GCP cluster validation
{{- if index .Values "validation-gcp-nodepools" "enabled" }}
  - Validation GCP Adapter (nodepools): GCP nodepool validation
{{- end }}
{{- if .Values.base.rabbitmq.enabled }}
  - RabbitMQ: In-cluster message broker (development mode)
{{- end }}

Broker Configuration:
{{- if eq .Values.base.global.broker.type "googlepubsub" }}
  Type: Google Pub/Sub
  Project: {{ .Values.base.global.broker.googlepubsub.projectId | default "NOT SET - Please configure!" }}
{{- else }}
  Type: RabbitMQ (development mode)
{{- end }}

{{- if eq .Values.base.global.broker.type "googlepubsub" }}

Workload Identity Federation:
  IAM permissions are granted directly to Kubernetes service accounts via terraform.
  No GCP service accounts or annotations needed.

  If you see permission errors, verify:
  1. Terraform was applied with the correct namespace ({{ .Release.Namespace }})
  2. Service account names match terraform configuration:
     - sentinel
     - landing-zone-adapter
     - validation-gcp-adapter
{{- if index .Values "base" "sentinel-nodepools" "enabled" }}
     - sentinel-nodepools (or reuse sentinel SA)
{{- end }}
{{- end }}

To check the status:
  kubectl get pods -n {{ .Release.Namespace }}

To view logs:
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=hyperfleet-api
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=sentinel
{{- if index .Values "base" "sentinel-nodepools" "enabled" }}
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=sentinel-nodepools
{{- end }}
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=adapter-landing-zone
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=validation-gcp
{{- if index .Values "validation-gcp-nodepools" "enabled" }}
  kubectl logs -n {{ .Release.Namespace }} -l app.kubernetes.io/name=validation-gcp-nodepools
{{- end }}
