# Default values for hyperfleet umbrella chart
# This is a YAML-formatted file.

# =============================================================================
# Global Broker Configuration
# =============================================================================
# Configure broker type globally. RabbitMQ is default for local development.
# For GCP deployments, use googlepubsub with Workload Identity.
global:
  broker:
    # Broker type: rabbitmq (default for dev) or googlepubsub (for GCP)
    type: rabbitmq
    # Google Pub/Sub settings (when type: googlepubsub)
    googlepubsub:
      # GCP project ID (required for Pub/Sub)
      projectId: ""
      # Topic naming: {namespace}-{resourceType} (e.g., hyperfleet-dev-clusters)
      # Auto-create resources (for dev - requires pubsub.editor role)
      createTopicIfMissing: true
      createSubscriptionIfMissing: true

# =============================================================================
# HyperFleet API Configuration
# =============================================================================
# Reference: hyperfleet-api/charts/values.yaml
hyperfleet-api:
  # Enable/disable API deployment
  enabled: true
  replicaCount: 1
  image:
    registry: quay.io/openshift-hyperfleet
    repository: hyperfleet-api
    tag: latest
  # Database configuration
  database:
    # Built-in PostgreSQL for development
    postgresql:
      enabled: true
    # External database for production
    external:
      enabled: false
      secretName: ""

# =============================================================================
# HyperFleet Adapter Configuration
# =============================================================================
# Reference: hyperfleet-adapter/charts/values.yaml
# NOTE: Adapter is disabled by default because it requires custom AdapterConfig
# (adapter.yaml) specific to your cloud provider and deployment scenario.
# See hyperfleet-adapter/configs/adapter-config-template.yaml for examples.
hyperfleet-adapter:
  # Enable/disable Adapter deployment
  enabled: false
  replicaCount: 1
  image:
    registry: quay.io/openshift-hyperfleet
    repository: hyperfleet-adapter
    tag: latest
  # Broker configuration for consuming events
  broker:
    create: true
    type: rabbitmq
    subscriptionId: "hyperfleet-adapter-queue"
    env:
      BROKER_RABBITMQ_URL: "amqp://hyperfleet:hyperfleet-dev-password@hyperfleet-rabbitmq:5672/"

# =============================================================================
# HyperFleet Sentinel Configuration
# =============================================================================
# Reference: hyperfleet-sentinel/deployments/helm/sentinel/values.yaml
# Note: Sentinel uses full repository path (no separate registry field)
sentinel:
  # Enable/disable Sentinel deployment
  enabled: true
  replicaCount: 1
  image:
    repository: quay.io/openshift-hyperfleet/sentinel
    tag: latest
  # Broker configuration for publishing events
  broker:
    type: rabbitmq
    topic: "hyperfleet-clusters"
    rabbitmq:
      url: "amqp://hyperfleet:hyperfleet-dev-password@hyperfleet-rabbitmq:5672/"

# =============================================================================
# RabbitMQ Configuration (Development)
# =============================================================================
# Simple RabbitMQ deployment for dev. Disable for production and use external broker.
rabbitmq:
  enabled: true
  image:
    repository: rabbitmq
    tag: 3-management
  auth:
    username: hyperfleet
    password: hyperfleet-dev-password
  resources:
    limits:
      cpu: 500m
      memory: 512Mi
    requests:
      cpu: 100m
      memory: 256Mi
